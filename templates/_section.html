<% if (!_.isString(slide) && !_.isArray(slide) && _.isObject(slide)) { %>
    <section <%= _.map(slide.attr, function (val, attr) {return attr + '="' + val + '"'}).join(' ')%>>
      <% if (slide.title) { %>
        <h2><%= slide.title %></h2>
      <% } %>
      <%= html %>
  <% if (slide.figures) { %>
        <figure>
          <div>
      <% _.each(slide.figures, function(figure,index) { %>
      <a href="#/<%=sectionIndex%>/<%=subsectionIndex%>/<%=index%>" rel="<%=sectionIndex%><%=subsectionIndex%><%=index%>" class="lightbox_image" title="<%= slide.caption.replace(/(<([^>]+)>)/ig,' ') %>">
        <img src="<%= figure.replace('.jpg','_thumb.jpg') %>" alt="<%= slide.figure_title||slide.title %>" />
      </a>
      <a class="lightbox" rel="<%=sectionIndex%><%=subsectionIndex%><%=index%>" id="/<%=sectionIndex%>/<%=subsectionIndex%>/<%=index%>"><img src="<%= figure %>" /></a>
          <% }); %>
          </div>
        <figcaption><%= slide.figure_title||slide.title %>
        <br /><%= slide.caption %></figcaption>
    </figure>
  <% } %>
    </section>
<% } %><% if (_.isString(slide)) { %>
    <section data-<% if (slide.indexOf('.html') !== -1) { %>html<% } else { %>markdown<% }%>="slides/<%= slide %>"></section><% } %>
